/* Copyright 2014 Google */ (function(){var h,k=this,m=function(){},n=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},p=function(a){return"function"==n(a)},aa=function(a,b,c){return a.call.apply(a.bind,arguments)},ba=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},q=function(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?
aa:ba;return q.apply(null,arguments)},ca=Date.now||function(){return+new Date},r=function(a,b){function c(){}c.prototype=b.prototype;a.M=b.prototype;a.prototype=new c;a.L=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return q.apply(null,c)}return q(this,a)};var s=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,s);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};r(s,Error);var da=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},ea=function(a,b){return a<b?-1:a>b?1:0};var fa=function(a,b){b.unshift(a);s.call(this,da.apply(null,b));b.shift()};r(fa,s);var ga=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),f=d;else a&&(e+=": "+a,f=b);throw new fa(""+e,f||[]);},t=function(a,b,c){a||ga("",null,b,Array.prototype.slice.call(arguments,2))},ha=function(a,b,c){p(a)||ga("Expected function but got %s: %s.",[n(a),a],b,Array.prototype.slice.call(arguments,2))};var u=Array.prototype,ia=u.some?function(a,b,c){t(null!=a.length);return u.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e="string"==typeof a?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},ja=function(a){return u.concat.apply(u,arguments)},ka=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var la="StopIteration"in k?k.StopIteration:Error("StopIteration"),ma=function(){};ma.prototype.next=function(){throw la;};ma.prototype.K=function(){return this};var na=function(a,b){for(var c in a)b.call(void 0,a[c],c,a)};var v=function(a,b){this.b={};this.a=[];this.d=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof v)e=a.n(),d=a.k();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)this.set(e[c],d[c])}};v.prototype.k=function(){w(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
v.prototype.n=function(){w(this);return this.a.concat()};v.prototype.remove=function(a){return x(this.b,a)?(delete this.b[a],this.c--,this.d++,this.a.length>2*this.c&&w(this),!0):!1};var w=function(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];x(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],x(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}};h=v.prototype;h.get=function(a,b){return x(this.b,a)?this.b[a]:b};
h.set=function(a,b){x(this.b,a)||(this.c++,this.a.push(a),this.d++);this.b[a]=b};h.forEach=function(a,b){for(var c=this.n(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};h.clone=function(){return new v(this)};h.K=function(a){w(this);var b=0,c=this.a,d=this.b,e=this.d,f=this,g=new ma;g.next=function(){for(;;){if(e!=f.d)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw la;var g=c[b++];return a?g:d[g]}};return g};
var x=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var y;t:{var oa=k.navigator;if(oa){var pa=oa.userAgent;if(pa){y=pa;break t}}y=""}var z=function(a){return-1!=y.indexOf(a)};var qa=z("Opera")||z("OPR"),A=z("Trident")||z("MSIE"),ra=z("Gecko")&&-1==y.toLowerCase().indexOf("webkit")&&!(z("Trident")||z("MSIE")),sa=-1!=y.toLowerCase().indexOf("webkit"),ta=function(){var a=k.document;return a?a.documentMode:void 0},ua=function(){var a="",b;if(qa&&k.opera)return a=k.opera.version,p(a)?a():a;ra?b=/rv\:([^\);]+)(\)|;)/:A?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:sa&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(y))?a[1]:"");return A&&(b=ta(),b>parseFloat(a))?String(b):a}(),va={},wa=function(a){if(!va[a]){for(var b=
0,c=String(ua).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",l=d[f]||"",F=RegExp("(\\d*)(\\D*)","g"),H=RegExp("(\\d*)(\\D*)","g");do{var I=F.exec(g)||["","",""],J=H.exec(l)||["","",""];if(0==I[0].length&&0==J[0].length)break;b=ea(0==I[1].length?0:parseInt(I[1],10),0==J[1].length?0:parseInt(J[1],10))||ea(0==I[2].length,0==J[2].length)||ea(I[2],J[2])}while(0==b)}va[a]=0<=b}},
xa=k.document,ya=xa&&A?ta()||("CSS1Compat"==xa.compatMode?parseInt(ua,10):5):void 0;var za=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Ba=function(a){if(Aa){Aa=!1;var b=k.location;if(b){var c=b.href;if(c&&(c=(c=Ba(c)[3]||null)?decodeURI(c):c)&&c!=b.hostname)throw Aa=!0,Error();}}return a.match(za)},Aa=sa;var B=function(a,b){var c;a instanceof B?(this.i=void 0!==b?b:a.i,Ca(this,a.l),this.u=a.u,this.o=a.o,Da(this,a.t),this.s=a.s,Ea(this,a.a.clone()),this.r=a.r):a&&(c=Ba(String(a)))?(this.i=!!b,Ca(this,c[1]||"",!0),this.u=C(c[2]||""),this.o=C(c[3]||"",!0),Da(this,c[4]),this.s=C(c[5]||"",!0),Ea(this,c[6]||"",!0),this.r=C(c[7]||"")):(this.i=!!b,this.a=new D(null,0,this.i))};h=B.prototype;h.l="";h.u="";h.o="";h.t=null;h.s="";h.r="";h.i=!1;
h.toString=function(){var a=[],b=this.l;b&&a.push(E(b,Fa,!0),":");if(b=this.o){a.push("//");var c=this.u;c&&a.push(E(c,Fa,!0),"@");a.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.t;null!=b&&a.push(":",String(b))}if(b=this.s)this.o&&"/"!=b.charAt(0)&&a.push("/"),a.push(E(b,"/"==b.charAt(0)?Ga:Ha,!0));(b=this.a.toString())&&a.push("?",b);(b=this.r)&&a.push("#",E(b,Ia));return a.join("")};h.clone=function(){return new B(this)};
var Ca=function(a,b,c){a.l=c?C(b,!0):b;a.l&&(a.l=a.l.replace(/:$/,""))},Da=function(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.t=b}else a.t=null},Ea=function(a,b,c){b instanceof D?(a.a=b,Ja(a.a,a.i)):(c||(b=E(b,Ka)),a.a=new D(b,0,a.i))},Ma=function(a,b,c){"array"==n(c)||(c=[String(c)]);La(a.a,b,c)},C=function(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""},E=function(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Na),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,
"%$1")),a):null},Na=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},Fa=/[#\/\?@]/g,Ha=/[\#\?:]/g,Ga=/[\#\?]/g,Ka=/[\#\?@]/g,Ia=/#/g,D=function(a,b,c){this.b=a||null;this.d=!!c},K=function(a){if(!a.a&&(a.a=new v,a.c=0,a.b))for(var b=a.b.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=G(a,e);d=a;f=f?decodeURIComponent(f.replace(/\+/g," ")):"";
K(d);d.b=null;var e=G(d,e),g=d.a.get(e);g||d.a.set(e,g=[]);g.push(f);d.c++}};D.prototype.a=null;D.prototype.c=null;D.prototype.remove=function(a){K(this);a=G(this,a);return x(this.a.b,a)?(this.b=null,this.c-=this.a.get(a).length,this.a.remove(a)):!1};var Oa=function(a,b){K(a);b=G(a,b);return x(a.a.b,b)};D.prototype.n=function(){K(this);for(var a=this.a.k(),b=this.a.n(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
D.prototype.k=function(a){K(this);var b=[];if("string"==typeof a)Oa(this,a)&&(b=ja(b,this.a.get(G(this,a))));else{a=this.a.k();for(var c=0;c<a.length;c++)b=ja(b,a[c])}return b};D.prototype.set=function(a,b){K(this);this.b=null;a=G(this,a);Oa(this,a)&&(this.c-=this.a.get(a).length);this.a.set(a,[b]);this.c++;return this};D.prototype.get=function(a,b){var c=a?this.k(a):[];return 0<c.length?String(c[0]):b};var La=function(a,b,c){a.remove(b);0<c.length&&(a.b=null,a.a.set(G(a,b),ka(c)),a.c+=c.length)};
D.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";for(var a=[],b=this.a.n(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.k(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.b=a.join("&")};D.prototype.clone=function(){var a=new D;a.b=this.b;this.a&&(a.a=this.a.clone(),a.c=this.c);return a};
var G=function(a,b){var c=String(b);a.d&&(c=c.toLowerCase());return c},Ja=function(a,b){b&&!a.d&&(K(a),a.b=null,a.a.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),La(this,e,a))},a));a.d=b};var Pa;if(!(Pa=!ra&&!A)){var Qa;if(Qa=A)Qa=A&&9<=ya;Pa=Qa}Pa||ra&&wa("1.9.1");A&&wa("9");var Sa=function(a,b){na(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ra?a.setAttribute(Ra[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})},Ra={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};var Ta=function(a){k.setTimeout(function(){throw a;},0)},Ua,Va=function(){var a=k.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=q(function(a){if(a.origin==
d||a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!z("Trident")&&!z("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){c=c.next;var a=c.I;c.I=null;a()};return function(a){d.next={I:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){k.setTimeout(a,0)}};var Za=function(a,b){L||Wa();Xa||(L(),Xa=!0);M.push(new Ya(a,b))},L,Wa=function(){if(k.Promise&&k.Promise.resolve){var a=k.Promise.resolve();L=function(){a.then($a)}}else L=function(){var a=$a;!p(k.setImmediate)||k.Window&&k.Window.prototype.setImmediate==k.setImmediate?(Ua||(Ua=Va()),Ua(a)):k.setImmediate(a)}},Xa=!1,M=[],$a=function(){for(;M.length;){var a=M;M=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.a.call(c.b)}catch(d){Ta(d)}}}Xa=!1},Ya=function(a,b){this.a=a;this.b=b};var ab=function(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0},bb=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};var P=function(a,b){this.a=0;this.f=void 0;this.b=this.c=null;this.d=this.e=!1;try{var c=this;a.call(b,function(a){N(c,2,a)},function(a){if(!(a instanceof O))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}N(c,3,a)})}catch(d){N(this,3,d)}};
P.prototype.then=function(a,b,c){null!=a&&ha(a,"opt_onFulfilled should be a function.");null!=b&&ha(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return cb(this,p(a)?a:null,p(b)?b:null,c)};ab(P);P.prototype.cancel=function(a){0==this.a&&Za(function(){var b=new O(a);db(this,b)},this)};
var db=function(a,b){if(0==a.a)if(a.c){var c=a.c;if(c.b){for(var d=0,e=-1,f=0,g;g=c.b[f];f++)if(g=g.p)if(d++,g==a&&(e=f),0<=e&&1<d)break;0<=e&&(0==c.a&&1==d?db(c,b):(d=c.b.splice(e,1)[0],eb(c),d.v(b)))}}else N(a,3,b)},gb=function(a,b){a.b&&a.b.length||2!=a.a&&3!=a.a||fb(a);a.b||(a.b=[]);a.b.push(b)},cb=function(a,b,c,d){var e={p:null,F:null,v:null};e.p=new P(function(a,g){e.F=b?function(c){try{var e=b.call(d,c);a(e)}catch(H){g(H)}}:a;e.v=c?function(b){try{var e=c.call(d,b);void 0===e&&b instanceof
O?g(b):a(e)}catch(H){g(H)}}:g});e.p.c=a;gb(a,e);return e.p};P.prototype.g=function(a){t(1==this.a);this.a=0;N(this,2,a)};P.prototype.j=function(a){t(1==this.a);this.a=0;N(this,3,a)};
var N=function(a,b,c){if(0==a.a){if(a==c)b=3,c=new TypeError("Promise cannot resolve to itself");else{if(bb(c)){a.a=1;c.then(a.g,a.j,a);return}var d=typeof c;if("object"==d&&null!=c||"function"==d)try{var e=c.then;if(p(e)){hb(a,c,e);return}}catch(f){b=3,c=f}}a.f=c;a.a=b;fb(a);3!=b||c instanceof O||ib(a,c)}},hb=function(a,b,c){a.a=1;var d=!1,e=function(b){d||(d=!0,a.g(b))},f=function(b){d||(d=!0,a.j(b))};try{c.call(b,e,f)}catch(g){f(g)}},fb=function(a){a.e||(a.e=!0,Za(a.m,a))};
P.prototype.m=function(){for(;this.b&&this.b.length;){var a=this.b;this.b=[];for(var b=0;b<a.length;b++){var c=a[b],d=this.f;2==this.a?c.F(d):(eb(this),c.v(d))}}this.e=!1};var eb=function(a){for(;a&&a.d;a=a.c)a.d=!1},ib=function(a,b){a.d=!0;Za(function(){a.d&&jb.call(null,b)})},jb=Ta,O=function(a){s.call(this,a)};r(O,s);/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
var Q=function(a,b){this.e=[];this.C=a;this.A=b||null;this.d=this.a=!1;this.c=void 0;this.m=this.B=this.g=!1;this.f=0;this.b=null;this.j=0};Q.prototype.cancel=function(a){if(this.a)this.c instanceof Q&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b;a?b.cancel(a):(b.j--,0>=b.j&&b.cancel())}this.C?this.C.call(this.A,this):this.m=!0;this.a||kb(this,new R)}};Q.prototype.D=function(a,b){this.g=!1;lb(this,a,b)};
var lb=function(a,b,c){a.a=!0;a.c=c;a.d=!b;mb(a)},ob=function(a){if(a.a){if(!a.m)throw new nb;a.m=!1}},kb=function(a,b){ob(a);pb(b);lb(a,!1,b)},pb=function(a){t(!(a instanceof Q),"An execution sequence may not be initiated with a blocking Deferred.")},qb=function(a,b,c,d){t(!a.B,"Blocking Deferreds can not be re-used");a.e.push([b,c,d]);a.a&&mb(a)};Q.prototype.then=function(a,b,c){var d,e,f=new P(function(a,b){d=a;e=b});qb(this,d,function(a){a instanceof R?f.cancel():e(a)});return f.then(a,b,c)};
ab(Q);
var rb=function(a){return ia(a.e,function(a){return p(a[1])})},mb=function(a){if(a.f&&a.a&&rb(a)){var b=a.f,c=S[b];c&&(k.clearTimeout(c.h),delete S[b]);a.f=0}a.b&&(a.b.j--,delete a.b);for(var b=a.c,d=c=!1;a.e.length&&!a.g;){var e=a.e.shift(),f=e[0],g=e[1],e=e[2];if(f=a.d?g:f)try{var l=f.call(e||a.A,b);void 0!==l&&(a.d=a.d&&(l==b||l instanceof Error),a.c=b=l);bb(b)&&(d=!0,a.g=!0)}catch(F){b=F,a.d=!0,rb(a)||(c=!0)}}a.c=b;d&&(l=q(a.D,a,!0),d=q(a.D,a,!1),b instanceof Q?(qb(b,l,d),b.B=!0):b.then(l,d));
c&&(b=new sb(b),S[b.h]=b,a.f=b.h)},nb=function(){s.call(this)};r(nb,s);nb.prototype.message="Deferred has already fired";var R=function(){s.call(this)};r(R,s);R.prototype.message="Deferred was canceled";var sb=function(a){this.h=k.setTimeout(q(this.b,this),0);this.a=a};sb.prototype.b=function(){t(S[this.h],"Cannot throw an error that is not scheduled.");delete S[this.h];throw this.a;};var S={};var wb=function(a,b){var c=b||{},d=c.document||document,e=document.createElement("SCRIPT"),f={H:e,q:void 0},g=new Q(tb,f),l=null,F=null!=c.timeout?c.timeout:5E3;0<F&&(l=window.setTimeout(function(){T(e,!0);kb(g,new ub(1,"Timeout reached for loading script "+a))},F),f.q=l);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(T(e,c.J||!1,l),ob(g),pb(null),lb(g,!0,null))};e.onerror=function(){T(e,!0,l);kb(g,new ub(0,"Error while loading script "+a))};
Sa(e,{type:"text/javascript",charset:"UTF-8",src:a});vb(d).appendChild(e);return g},vb=function(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement},tb=function(){if(this&&this.H){var a=this.H;a&&"SCRIPT"==a.tagName&&T(a,!0,this.q)}},T=function(a,b,c){null!=c&&k.clearTimeout(c);a.onload=m;a.onerror=m;a.onreadystatechange=m;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)},ub=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=
": "+b);s.call(this,c)};r(ub,s);var xb=function(a,b){this.b=new B(a);this.a=b?b:"callback";this.q=5E3},yb=0;xb.prototype.send=function(a,b,c,d){a=a||null;d=d||"_"+(yb++).toString(36)+ca().toString(36);k._callbacks_||(k._callbacks_={});var e=this.b.clone();if(a)for(var f in a)a.hasOwnProperty&&!a.hasOwnProperty(f)||Ma(e,f,a[f]);b&&(k._callbacks_[d]=zb(d,b),Ma(e,this.a,"_callbacks_."+d));b=wb(e.toString(),{timeout:this.q,J:!0});qb(b,null,Ab(d,a,c),void 0);return{h:d,G:b}};
xb.prototype.cancel=function(a){a&&(a.G&&a.G.cancel(),a.h&&Bb(a.h,!1))};var Ab=function(a,b,c){return function(){Bb(a,!1);c&&c(b)}},zb=function(a,b){return function(c){Bb(a,!0);b.apply(void 0,arguments)}},Bb=function(a,b){k._callbacks_[a]&&(b?delete k._callbacks_[a]:k._callbacks_[a]=m)};var U=function(a,b){return a.replace(/\{\{\$.*?\}\}/g,function(a){a=a.substr(3,a.length-5);return String(b[a])||""})},Cb=function(a){return a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\n/g,"\\n")},Db=function(a){a=String(a).toLowerCase().replace("_","-");if("zh-cn"==a)return"zh-CN";if("zh-tw"==a)return"zh-TW";var b=a.indexOf("-");a=0<=b?a.substring(0,b):a;return"zh"==a?"zh-CN":a},Eb=function(a,b){return"https://translate.google.com/?source=gtx_c#auto/"+a+"/"+encodeURIComponent(b)};var V=function(){this.b=[];chrome.i18n.getAcceptLanguages(q(this.e,this));this.a="";this.d="1";this.c=[];chrome.storage.local.get(null,q(this.g,this));Fb(this)},Hb=function(){var a=Gb;if(""!=a.a)a=a.a;else t:{for(var b=0;b<a.b.length;b++){var c=Db(a.b[b]);if(a.c[c]){a=c;break t}}a="en"}return a};V.prototype.g=function(a){"gtxTargetLang"in a&&(this.a=a.gtxTargetLang);"gtxShowBubble"in a&&(this.d=a.gtxShowBubble);"gtxTargetLangList"in a&&(this.c=a.gtxTargetLangList);this.loaded=!0};
var Fb=function(a){chrome.storage.onChanged.addListener(function(b){b.gtxTargetLang&&(a.a=b.gtxTargetLang.newValue);b.gtxShowBubble&&(a.d=b.gtxShowBubble.newValue)})};V.prototype.e=function(a){this.b=a};V.prototype.f=function(a){var b={};b.gtxSourceLangList=a.sl;b.gtxTargetLangList=a.tl;chrome.storage.local.set(b);this.c=a.tl};var Ib=U("(function(){({{$code}})();})();",{code:window.injection.toString()}),Jb=U("(function(){({{$code}})();})();",{code:window.injector.toString()});delete window.injector;delete window.injection;function Kb(a,b,c){b={pageLang:b,userLang:c};b.content=Cb(U(Ib,b));chrome.tabs.executeScript(a,{code:U(Jb,b)},function(){chrome.runtime.lastError&&console.error(chrome.runtime.lastError.message)})}var Lb=function(a){this.c=a;this.w=this.a=!1};
Lb.prototype.d=function(a){if(!this.w){if(!a||"und"==a||a.match("invalid"))a="auto";this.b=a;a=Db(Hb());var b=Db(this.b);Kb(this.c,b,a);this.a=!1}};var W=function(){this.a={}};W.prototype.b=function(a){this.a[a]||(this.a[a]=new Lb(a));a=this.a[a];a.a||a.w||(a.a=!0,a.b="",chrome.tabs.detectLanguage(a.c,q(a.d,a)))};W.prototype.c=function(a){this.a[a]&&(this.a[a].w=!0,delete this.a[a])};
var Mb=new W,Gb=new V,Nb=Gb,Ob=new xb("https://translate.googleapis.com/translate_a/l","cb"),Pb=chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():"en";Ob.send({client:"gtx",hl:Pb},q(Nb.f,Nb));var X=document.createElement("audio");
chrome.runtime.onMessage.addListener(function(a,b){a.audioSrc?X.paused||a.audioSrc!=X.src?(X.src=a.audioSrc,X.load(),X.play()):(X.pause(),X.currentTime=0):a.bubbleClosed||a.popupClosed?X.pause():a.detectLanguage&&chrome.tabs.detectLanguage(function(a){chrome.tabs.sendMessage(b.tab.id,{"gtx.detected":a})})});chrome.runtime.onConnect.addListener(function(a){a.onDisconnect.addListener(function(){chrome.runtime.sendMessage({popupClosed:!0})})});
chrome.contextMenus.create({title:function(a){a=chrome.i18n.getMessage(a);return chrome.i18n.getMessage(a)}("MSG_FOOTER_TRANSLATE"),contexts:["selection"],onclick:function(a){chrome.tabs.create({url:Eb(Hb(),a.selectionText)})}});var Qb=function(){return Mb},Y=["translate","getTranslateManager"],Z=k;Y[0]in Z||!Z.execScript||Z.execScript("var "+Y[0]);for(var $;Y.length&&($=Y.shift());)Y.length||void 0===Qb?Z[$]?Z=Z[$]:Z=Z[$]={}:Z[$]=Qb;W.prototype.attach=W.prototype.b;W.prototype.detach=W.prototype.c;})();
